# CoordPlot
 Proof of concept
 
As ive said a couple of times, Im really interested in hiking and bikepacking/touring. I use a lot of different types of tools and gadgets on my trips. Mainly to keep myself safe. What I also use a lot is my phone. Since there isn’t enough money in the universe to be able to buy all the gadgets in the store that I need. So I rely on my phone for gps, navigation and also as an e-reader and music player and podcast player and flashlight and so on. Using all those features cost hecka lot of battery though. I have seen the movie 127 hours, where the James Franco has his arm get stuck between two rocks. And since he didn’t tell anyone where he was, he had to rely on himself to get out of the situation, by cutting his arm off. I don’t like to cut my arm off. So I would like to have my safety contacts know where I am at all times. That, though, means that I currently need to use an app with features that I don’t need. And those extra features eat in the battery time.
What I thought of then is to have an app on my phone that only uses the gps positioning to get my coordinates in every 5 minutes or so. That way it would use the resources much much less than a multipurpose app would. So I came up with this proof of concept that would, down the line turn into a mobile app that would plot the course ive gone through since starting a trip. And it would be available to be viewed by my safety contacts.
 
About the tools and libraries I have used. Starting off of course GOOGLE! Then Flask and html/css for the site itself. Database for storing the location coordinates is MongoDB. Coordinate output is saved into gpx files. For some down the line possibility to add the trips to a much more powerful sports app. Postman is a tool that I used for querying the apis. It’s a easy to use and quite cool tool. Libraries I used were pymongo, requests, os and folium for openstreetmaps. Openstreetmaps for the map, Mock coordinates api for the imitation of constantly changing coords. Gpxpy to make a gpx file for posterity.
I started off with writing the front end part of the code and since im not good with front end stuff I used a color wheel for color coordination and other than that kept it extremely simple. Then I started to learn mongoDB, so I could integrate into the project. As that was also one of my goals, when I started. I then searched for a library that would support both showing maps, but also plotting polylines on top of them.
Firstly I found google maps, but it needed the api key and I kinda don’t want to use an api key, especially one, that is only free for a handful of api calls. So I scratched that and found openstreetmaps. I embedded the map into the sites html code. By having the html file of the map be a different file. And that can be updated by using the folium library as the need arises. The coordinates look whacky on the map, because I needed mock coordinates to build It and I didn’t really care what they were as long as they were constantly changing. I queried the coords from the api and saved them to the database. I used pymongos find function to find the last one added, since I only needed it to add one set every time I get a coordinate. Then using python proper I sorted the coordinates from the database into 2 lists longtitude and lattitude. Folium needed 1 from both lists to plot the polyline. So I used a for loop to iterate between the 2 of them. Then I used folium to draw the line on the map.
My frontend skills are subpar and to get my buttons to execute python code I used flask and made a function for each of the buttons and had them redirect back to homescreen if pressed. So I didn’t have to use javascript. Get coords button executes the api call for the coordinates and sorts them into lists. Save to gpx and plot button executes the for loop that goes down to the point location in the gpx file and adds longtitude and latitude. Then for each to add each point on the map. Then folium.Polyline draws the polyline on the coordinates. And Lastly I overwrite map.html file
Clear the map, rewrites the map centering onto helsinki and drops the coordinates collection from the database and deletes the locations.gpx file.


On the road I had bunch of different issues I needed to overcome. Mainly misspellings though. For example. I queryd for an api and used api.apisite.com instead of https://api.apisite.com
Circular importing was also I struggle with. Since I always import the whole file. Instead of importing the necessary parts to the functions itself. 
Error handling is a skill I also a problem I havent learned well enough. So in this project I have started to use try/except: function. By setting the error message for except just something like print(“this is probably the problem!”)
 In the future I would try to adapt it onto mobile devices and use phones gps for the coordinates. It would be automated and ideally all the bigboy stuff would be done off phone. Like drawing the map and such. Since I always know where I am myself.

Yes, so it’s a gps plotting web app that is using MongoDb as a database. And use mock coordinates api, folium and gpxpy for the mapping part. Big shoutout to Postman once again, that is a convenient tool, that I suggest people interested in api calls definitely should try. Overall I had a blast working on this project. It took me about two weeks working on it only here. This way I also avoided burnout. Since In my own experience I cant be consumed by something the whole time. Without it taking a toll on other aspects of my life. And I had fun making this proof of concept of something that would hopefully become something useful.

